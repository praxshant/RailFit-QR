<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Railways Track Fittings QR System</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="manifest" href="manifest.json">
    <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
</head>
<body>
    <!-- Enhanced Header -->
    <header class="ir-header">
        <div class="header-container">
            <!-- Circular Logo Space -->
            <div class="logo-container">
                <div class="logo-circle">
                    <!-- Add your logo image/link here -->
                    <!-- <img src="your-logo.png" alt="Company Logo" class="logo-image"> -->
                    <img src="rela.png" alt="Company Logo" class="logo-image">
                    <!-- OR -->
                    <!-- <a href="your-website.com" class="logo-link">Your Logo</a> -->
                </div>
            </div>
            
            <div class="logo-section">
                <div class="logo-text">
                    <h1>RailFit</h1>
                    <h2>‡§≠‡§æ‡§∞‡§§‡•Ä‡§Ø ‡§∞‡•á‡§≤</h2>
                    <p>Inventory Management System</p>
                </div>
            </div>
            <nav>
                <ul class="nav-menu">
                    <li><a href="index.html" class="active">Home</a></li>
                    <li><a href="about.html">About</a></li>
                    <li><a href="contact.html">Contact</a></li>
                </ul>
            </nav>
            <div class="user-info" style="display: none;">
                <span class="user-greeting">Welcome, <span class="username"></span></span>
                <button class="logout-btn" onclick="window.app?.logout()">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Login Section -->
            <section id="login-section" class="section">
                <div class="login-hero">
                    <div class="hero-content">
                        <h1 class="hero-title">Secure Access to Railway QR System</h1>
                        <p class="hero-subtitle">Select your role and login to access the advanced track fittings management system</p>
                    </div>
                    <div class="hero-visual">
                        <i class="fas fa-shield-alt security-icon"></i>
                        <div class="security-badges">
                            <span class="badge"><i class="fas fa-lock"></i> JWT Secured</span>
                            <span class="badge"><i class="fas fa-users"></i> Role-Based</span>
                        </div>
                    </div>
                </div>

                <div class="login-card">
                    <div class="card-header">
                        <h2><i class="fas fa-key"></i> Access Railway QR System</h2>
                        <p>Select your role and login to access the system</p>
                    </div>

                    <form id="login-form">
                        <div class="role-selection">
                            <input type="radio" id="role-manufacturer" name="role" value="manufacturer">
                            <label for="role-manufacturer" class="role-card">
                                <div class="role-icon">üè≠</div>
                                <div class="role-info">
                                    <h3>Manufacturer</h3>
                                    <p>Generate QR codes for manufactured railway parts</p>
                                </div>
                            </label>

                            <input type="radio" id="role-vendor" name="role" value="vendor">
                            <label for="role-vendor" class="role-card">
                                <div class="role-icon">üè™</div>
                                <div class="role-info">
                                    <h3>Vendor</h3>
                                    <p>Access parts database and manage inventory</p>
                                </div>
                            </label>

                            <input type="radio" id="role-official" name="role" value="railway_official">
                            <label for="role-official" class="role-card">
                                <div class="role-icon">üöÇ</div>
                                <div class="role-info">
                                    <h3>Railway Official</h3>
                                    <p>Scan and verify QR codes on track fittings</p>
                                </div>
                            </label>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="username">
                                    <i class="fas fa-user"></i> Username
                                </label>
                                <input type="text" id="username" name="username" required placeholder="Enter your username">
                            </div>
                            <div class="form-group">
                                <label for="password">
                                    <i class="fas fa-lock"></i> Password
                                </label>
                                <input type="password" id="password" name="password" required placeholder="Enter your password">
                            </div>
                        </div>

                        <button type="submit" class="btn-primary">
                            <i class="fas fa-sign-in-alt"></i> Login to System
                        </button>
                    </form>

                    <div class="demo-credentials">
                        <h4><i class="fas fa-info-circle"></i> Demo Credentials</h4>
                        <div class="credentials-grid">
                            <div class="credential-item">
                                <strong>Manufacturer:</strong> manufacturer / mfg123
                            </div>
                            <div class="credential-item">
                                <strong>Vendor:</strong> vendor / vendor123
                            </div>
                            <div class="credential-item">
                                <strong>Railway Official:</strong> official / rail123
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Manufacturer Dashboard -->
            <section id="manufacturer-section" class="section" style="display: none;">
                <div class="dashboard-header">
                    <div class="dashboard-icon">üè≠</div>
                    <h2>Manufacturer Dashboard</h2>
                    <p>Generate QR codes for manufactured railway parts with auto-generated Item IDs</p>
                </div>

                <div class="dashboard-grid">
                    <div class="tool-card primary-tool">
                        <div class="tool-header">
                            <h3><i class="fas fa-qrcode"></i> Generate QR Code</h3>
                            <p>Create laser-ready QR codes for track fittings with smart ID generation</p>
                        </div>

                        <form id="qr-generator-form">
                            <!-- Part Type Selection (Primary Field) -->
                            <div class="form-group featured-field">
                                <label for="mfg-item-type">
                                    <i class="fas fa-cog"></i> Select Part Type *
                                </label>
                                <select id="mfg-item-type" name="item_type" required>
                                    <option value="">Choose part type to generate ID</option>
                                    <option value="elastic_rail_clip">Elastic Rail Clip</option>
                                    <option value="rail_pad">Rail Pad</option>
                                    <option value="liner">Liner</option>
                                    <option value="sleeper">Sleeper</option>
                                </select>
                            </div>

                            <div class="form-row">
                                <!-- User Number Input -->
                                <div class="form-group">
                                    <label for="mfg-user-number">
                                        <i class="fas fa-hashtag"></i> Your Number *
                                    </label>
                                    <input type="number" id="mfg-user-number" name="user_number" 
                                           required placeholder="e.g., 1234" min="1" max="9999">
                                    <small class="field-hint">Enter 1-4 digit number for unique identification</small>
                                </div>
                                
                                <!-- Auto-Generated Item ID (Read-only) -->
                                <div class="form-group">
                                    <label for="mfg-item-id">
                                        <i class="fas fa-barcode"></i> Auto-Generated Item ID
                                    </label>
                                    <input type="text" id="mfg-item-id" name="item_id" readonly 
                                           placeholder="Select part type and enter number">
                                    <small class="field-hint">Automatically generated based on your selections</small>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="mfg-vendor-lot">
                                        <i class="fas fa-box"></i> Vendor Lot *
                                    </label>
                                    <input type="text" id="mfg-vendor-lot" name="vendor_lot" required placeholder="e.g., VL2025001">
                                </div>
                                <div class="form-group">
                                    <label for="mfg-supply-date">
                                        <i class="fas fa-calendar"></i> Supply Date *
                                    </label>
                                    <input type="date" id="mfg-supply-date" name="supply_date" required>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="mfg-warranty">
                                        <i class="fas fa-shield-alt"></i> Warranty Period
                                    </label>
                                    <input type="text" id="mfg-warranty" name="warranty_period" placeholder="e.g., 5 years">
                                </div>
                                <div class="form-group">
                                    <label for="mfg-manufacturer">
                                        <i class="fas fa-industry"></i> Manufacturer
                                    </label>
                                    <input type="text" id="mfg-manufacturer" name="manufacturer" placeholder="Manufacturing company name">
                                </div>
                            </div>

                            <button type="submit" class="btn-primary">
                                <i class="fas fa-magic"></i> Generate QR Code
                            </button>
                        </form>

                        <!-- ID Generation Preview -->
                        <div id="id-preview" class="id-preview" style="display: none;">
                            <div class="preview-header">
                                <h4><i class="fas fa-eye"></i> ID Preview</h4>
                            </div>
                            <div class="preview-content">
                                <span class="preview-id"></span>
                                <div class="preview-breakdown">
                                    <span class="breakdown-item">
                                        <strong>Prefix:</strong> <span class="prefix-part"></span>
                                    </span>
                                    <span class="breakdown-item">
                                        <strong>Year:</strong> <span class="year-part"></span>
                                    </span>
                                    <span class="breakdown-item">
                                        <strong>Number:</strong> <span class="number-part"></span>
                                    </span>
                                </div>
                            </div>
                        </div>

                        <div id="qr-result" class="qr-result" style="display: none;">
                            <div class="result-header">
                                <h4><i class="fas fa-check-circle"></i> QR Code Generated Successfully</h4>
                            </div>
                            <div class="qr-display">
                                <div class="qr-image-container">
                                    <img id="qr-image" alt="Generated QR Code">
                                    <div class="qr-actions">
                                        <button class="btn-secondary" onclick="window.app?.downloadQR()">
                                            <i class="fas fa-download"></i> Download
                                        </button>
                                    </div>
                                </div>
                                <div class="qr-info">
                                    <div class="info-item">
                                        <strong>QR Reference:</strong>
                                        <span id="qr-reference" class="reference-code"></span>
                                    </div>
                                    <div class="info-item">
                                        <strong>Status:</strong>
                                        <span class="status-success">Generated Successfully</span>
                                    </div>
                                    <div class="info-item">
                                        <strong>Format:</strong>
                                        <span>PNG (Laser-ready)</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Vendor Dashboard -->
            <section id="vendor-section" class="section" style="display: none;">
                <div class="dashboard-header">
                    <div class="dashboard-icon">üè™</div>
                    <h2>Vendor Dashboard</h2>
                    <p>Access parts database and manage inventory with UDM/TMS integration</p>
                </div>

                <div class="vendor-tools">
                    <div class="tool-card">
                        <div class="tool-header">
                            <h3><i class="fas fa-search"></i> Search Parts Database</h3>
                            <p>Find parts by type, supplier, and date range</p>
                        </div>

                        <form id="parts-search-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="search-type">
                                        <i class="fas fa-filter"></i> Part Type
                                    </label>
                                    <select id="search-type" name="part_type">
                                        <option value="">All types</option>
                                        <option value="elastic_rail_clip">Elastic Rail Clip</option>
                                        <option value="rail_pad">Rail Pad</option>
                                        <option value="liner">Liner</option>
                                        <option value="sleeper">Sleeper</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="search-supplier">
                                        <i class="fas fa-building"></i> Supplier
                                    </label>
                                    <input type="text" id="search-supplier" name="supplier" placeholder="Enter supplier name">
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="search-from">
                                        <i class="fas fa-calendar-alt"></i> From Date
                                    </label>
                                    <input type="date" id="search-from" name="date_from">
                                </div>
                                <div class="form-group">
                                    <label for="search-to">
                                        <i class="fas fa-calendar-alt"></i> To Date
                                    </label>
                                    <input type="date" id="search-to" name="date_to">
                                </div>
                            </div>

                            <button type="submit" class="btn-primary">
                                <i class="fas fa-search"></i> Search Parts
                            </button>
                        </form>

                        <div id="search-results" class="search-results" style="display: none;"></div>
                    </div>

                    <div class="tool-card">
                        <div class="tool-header">
                            <h3><i class="fas fa-chart-bar"></i> Generate Parts Summary</h3>
                            <p>Create comprehensive reports with portal sync</p>
                        </div>

                        <form id="parts-summary-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="summary-type">
                                        <i class="fas fa-tags"></i> Select Part Type
                                    </label>
                                    <select id="summary-type" name="part_type" required>
                                        <option value="">Choose part type</option>
                                        <option value="elastic_rail_clip">Elastic Rail Clip</option>
                                        <option value="rail_pad">Rail Pad</option>
                                        <option value="liner">Liner</option>
                                        <option value="sleeper">Sleeper</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="summary-quantity">
                                        <i class="fas fa-hashtag"></i> Quantity
                                    </label>
                                    <input type="number" id="summary-quantity" name="quantity" min="1" value="1" required>
                                </div>
                            </div>

                            <button type="submit" class="btn-primary">
                                <i class="fas fa-file-alt"></i> Generate Summary
                            </button>
                        </form>

                        <div id="parts-summary-result" class="summary-results"></div>
                    </div>
                </div>
            </section>

            <!-- Railway Official Dashboard -->
            <section id="official-section" class="section" style="display: none;">
                <div class="dashboard-header">
                    <div class="dashboard-icon">üöÇ</div>
                    <h2>Railway Official Dashboard</h2>
                    <p>Scan and verify QR codes on track fittings with AI-powered insights</p>
                </div>

                <div class="scanner-tools">
                    <div class="webcam-scanner">
                        <div class="scanner-header">
                            <h3><i class="fas fa-video"></i> Live QR Code Scanner</h3>
                            <p>Position the QR code within the scanning area</p>
                        </div>

                        <div id="webcam-scanner-container">
                            <div class="camera-controls">
                                <select id="camera-select" class="camera-select">
                                    <option value="">Select Camera</option>
                                </select>
                                <button id="switch-camera" class="btn-secondary switch-camera">
                                    <i class="fas fa-sync"></i> Switch
                                </button>
                            </div>

                            <div class="scanner-container">
                                <div id="qr-reader"></div>
                            </div>

                            <div class="scanner-instructions">
                                <div class="instruction-item">
                                    <div class="instruction-icon">üì±</div>
                                    <span>Hold device steady</span>
                                </div>
                                <div class="instruction-item">
                                    <div class="instruction-icon">üí°</div>
                                    <span>Ensure good lighting</span>
                                </div>
                                <div class="instruction-item">
                                    <div class="instruction-icon">üéØ</div>
                                    <span>Center QR code in frame</span>
                                </div>
                            </div>

                            <div class="scanner-actions">
                                <button id="start-scan" class="start-scan">
                                    <i class="fas fa-play"></i> Start Live Scanning
                                </button>
                                <button id="stop-scan" class="stop-scan" style="display: none;">
                                    <i class="fas fa-stop"></i> Stop Scanning
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="scan-results" class="scan-results" style="display: none;"></div>
            </section>
        </div>
    </main>

    <!-- Enhanced Footer -->
    <footer class="ir-footer">
        <div class="footer-container">
            <div class="footer-grid">
                <div class="footer-section">
                    <h3>Indian Railways QR System</h3>
                    <p>Revolutionizing railway safety through advanced QR code technology and AI-powered analytics.</p>
                    <div class="social-links">
                        <a href="#" aria-label="LinkedIn"><i class="fab fa-linkedin"></i></a>
                        <a href="#" aria-label="GitHub"><i class="fab fa-github"></i></a>
                        <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                        <a href="#" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>

                <div class="footer-section">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="about.html">About Us</a></li>
                        <li><a href="contact.html">Contact</a></li>
                        <li><a href="#" onclick="window.app?.logout()">Login/Logout</a></li>
                    </ul>
                </div>

                <div class="footer-section">
                    <h3>System Features</h3>
                    <ul>
                        <li><a href="#qr-generation">QR Code Generation</a></li>
                        <li><a href="#scanning">Advanced Scanning</a></li>
                        <li><a href="#analytics">AI Analytics</a></li>
                        <li><a href="#integration">Portal Integration</a></li>
                    </ul>
                </div>

                <div class="footer-section">
                    <h3>Official Portals</h3>
                    <ul>
                        <li><a href="https://ireps.gov.in" target="_blank" rel="noopener">UDM Portal <i class="fas fa-external-link-alt"></i></a></li>
                        <li><a href="https://irecept.gov.in" target="_blank" rel="noopener">TMS Portal <i class="fas fa-external-link-alt"></i></a></li>
                        <li><a href="https://indianrailways.gov.in" target="_blank" rel="noopener">Indian Railways <i class="fas fa-external-link-alt"></i></a></li>
                    </ul>
                </div>
            </div>

            <div class="footer-bottom">
                <div class="footer-bottom-content">
                    <div class="copyright">
                        <p>&copy; 2025 Indian Railways. All rights reserved.</p>
                        <p>Developed for Smart India Hackathon 2025 | Problem Statement ID: 25021</p>
                    </div>
                    <div class="footer-links">
                        <a href="#privacy">Privacy Policy</a>
                        <a href="#terms">Terms of Service</a>
                        <a href="#security">Security</a>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <script src="src/app.js"></script>
</body>
</html>